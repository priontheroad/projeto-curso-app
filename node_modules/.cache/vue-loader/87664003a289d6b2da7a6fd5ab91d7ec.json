{"remainingRequest":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/src/components/ArquivosDiversos/Modal/ModalResumoXML.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/src/components/ArquivosDiversos/Modal/ModalResumoXML.vue","mtime":1678361197239},{"path":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBYmFYbWwgZnJvbSAiLi4vLi4vQWJhWG1sL0FiYVhtbC52dWUiOwppbXBvcnQgQXBpIGZyb20gIkAvc2VydmljZXMvYXBpLmpzIjsKaW1wb3J0IEZvcm0gZnJvbSAiQC9zZXJ2aWNlcy9tb2R1bGVzL2Zvcm0iOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNb2RhbFJlc3Vtb1htbCIsCiAgcHJvcHM6IFsidmlzaWJsZSIsICJkYWRvcyJdLAogIGNvbXBvbmVudHM6IHsKICAgIEFiYVhtbCwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4ge307CiAgfSwKICBjb21wdXRlZDogewogICAgbW9kYWxYbWw6IHsKICAgICAgZ2V0KCkgewogICAgICAgIHJldHVybiB0aGlzLnZpc2libGU7CiAgICAgIH0sCiAgICAgIHNldCh2YWx1ZSkgewogICAgICAgIGlmICghdmFsdWUpIHsKICAgICAgICAgIHRoaXMuJGVtaXQoImZlY2hhciIpOwogICAgICAgIH0KICAgICAgfSwKICAgIH0sCiAgICBoYW5kbGVNb2RhbENvbnN1bHRhOiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUubW9kYWxDb25zdWx0YS5tb2RhbENvbnN1bHRhOwogICAgICB9LAogICAgICBzZXQobmV3VmFsdWUpIHsKICAgICAgICBpZiAobmV3VmFsdWUgIT0gdGhpcy5oYW5kbGVNb2RhbENvbnN1bHRhKSB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIm1vZGFsQ29uc3VsdGEvc2V0TW9kYWxDb25zdWx0YSIsIG5ld1ZhbHVlKTsKICAgICAgICB9CiAgICAgIH0sCiAgICB9LAogICAgYWJhWG1sOiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuYWJhWG1sLmFiYVhtbDsKICAgICAgfSwKICAgICAgc2V0KG5ld1ZhbHVlKSB7CiAgICAgICAgaWYgKG5ld1ZhbHVlICE9IHRoaXMuYWJhWG1sKSB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoImFiYVhtbC9zZXRBYmFYbWwiLCBuZXdWYWx1ZSk7CiAgICAgICAgfQogICAgICB9LAogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICBtb2RhbFhtbCh2YWwpIHsKICAgICAgaWYgKHZhbCA9PSB0cnVlKSB7CiAgICAgICAgdGhpcy5hbHRlcmFyQWJhKCJhYmEtUmVzdW1vWG1sIik7CiAgICAgICAgdGhpcy5oYW5kbGVNb2RhbENvbnN1bHRhID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgfSwKCiAgbWV0aG9kczogewogICAgcHJveGltYUV0YXBhKCkgewogICAgICBpZiAodGhpcy5hYmFYbWwgPT0gImFiYS1SZXN1bW9YbWwiKSB7CiAgICAgICAgdGhpcy5hbHRlcmFyQWJhKCJhYmEtT3V0cmFzRGVzcGVzYXNYbWwiKTsKICAgICAgfQogICAgfSwKICAgIGV0YXBhQW50ZXJpb3IoKSB7CiAgICAgIGlmICh0aGlzLmFiYVhtbCA9PSAiYWJhLU91dHJhc0Rlc3Blc2FzWG1sIikgewogICAgICAgIHRoaXMuYWx0ZXJhckFiYSgiYWJhLVJlc3Vtb1htbCIpOwogICAgICB9CiAgICB9LAogICAgYWx0ZXJhckFiYShhYmEpIHsKICAgICAgdGhpcy5hYmFYbWwgPSBhYmE7CiAgICB9LAogICAgYXN5bmMgY3JpYXJDb25zdWx0YVhtbCgpIHsKICAgICAgbGV0IGFwaSA9IG5ldyBBcGkoKTsKICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgYXBpLnB1dCgiL2RlY2xhcmFjYW8vZGVjbGFyYWNhb1hNTCIsIHsKICAgICAgICBhZnJtbTogdGhpcy5kYWRvcy5hZnJtbSwKICAgICAgICBjYXBhdGF6aWE6IHRoaXMuZGFkb3MuY2FwYXRhemlhLAogICAgICAgIGJsU29tYUNhcGF0YXppYVZNTEQ6IHRoaXMuZGFkb3MuYmxTb21hQ2FwYXRhemlhVk1MRCwKICAgICAgICBpZF9kZWNsYXJhY2FvOiB0aGlzLmRhZG9zLmlkLAogICAgICAgIG91dHJhc19kZXNwZXNhczogdGhpcy5kYWRvcy5vdXRyYXNfZGVzcGVzYXMsCiAgICAgIH0pOwoKICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICBsZXQgaWREZWNsYXJhY2FvID0gdGhpcy5kYWRvcy5pZDsKCiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjb25zdWx0YS9zZXRDYXBhdGF6aWEnLCB0aGlzLmRhZG9zLmNhcGF0YXppYSk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjb25zdWx0YS9zZXRBZnJtbScsIHRoaXMuZGFkb3MuYWZybW0pOwogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY29uc3VsdGEvc2V0QmxTb21hQ2FwYXRhemlhVk1MRCcsIHRoaXMuZGFkb3MuYmxTb21hQ2FwYXRhemlhVk1MRCk7CgogICAgICAgIGxldCBkZWNsYXJhY2FvID0gdGhpcy4kcm9vdC4kYXBpCiAgICAgICAgICAuZ2V0KCIvZGVjbGFyYWNhby9saXN0YXIvIiArIGlkRGVjbGFyYWNhbykKICAgICAgICAgIC50aGVuKGFzeW5jIChyZXNwb25zZSkgPT4gewogICAgICAgICAgICBpZiAodHlwZW9mIHJlc3BvbnNlICE9PSAidW5kZWZpbmVkIiAmJiByZXNwb25zZS5zdGF0dXMgPT0gIjIwMCIpIHsKICAgICAgICAgICAgICBsZXQgcmVzcG9uc2VOZXcgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgIHRoaXMuZGFkb3NfeG1sID0gcmVzcG9uc2VOZXc7CgogICAgICAgICAgICAgIGxldCBmb3JtID0gbmV3IEZvcm0oKTsKICAgICAgICAgICAgICBmb3JtLmNhcnJlZ2FySW5mb0NvbnN1bHRhKHJlc3BvbnNlTmV3KTsKICAgICAgICAgICAgICBmb3JtLmNhcnJlZ2FyUmVzdWx0YWRvVGVsYVNpbXBsZXMocmVzcG9uc2VOZXcpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm8gbm8gY2FycmVnYW1lbnRvIGRhcyBpbmZvcm1hw6fDtWVzIGNvbSBhIEFQSS4iKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICAgICAgICB9KTsKCiAgICAgICAgUHJvbWlzZS5hbGwoW2RlY2xhcmFjYW9dKQogICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICB0aGlzLiRlbWl0KCJmZWNoYXIiKTsKCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgKICAgICAgICAgICAgICAibW9kYWxOb3ZhU2ltdWxhY2FvL3NldE1vZGFsTm92YVNpbXVsYWNhbyIsCiAgICAgICAgICAgICAgZmFsc2UKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIGlmICghdGhpcy5kYWRvcy5ibEVkaXRhckNvbnN1bHRhKSB7CiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICB9LCAyMDApOwogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiAiL2NvbnN1bHRhIn0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB9KTsKICAgICAgICB0aGlzLm1vZGFsWG1sID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["ModalResumoXML.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ModalResumoXML.vue","sourceRoot":"src/components/ArquivosDiversos/Modal","sourcesContent":["<template>\n  <v-dialog v-model=\"modalXml\" persistent scrollable width=\"700\">\n    <v-card min-height=\"550px\">\n      <v-card-title>\n        <v-row no-gutters>\n          <v-col align=\"start\" cols=\"10\">\n            <span class=\"mr-2\" style=\"font-size: 20px; font-weight: bold; color: #2d5071\">{{ dados.blEditarConsulta ? 'Editar' : 'Novo' }} Rateio</span>\n            <span v-if=\"abaXml == 'aba-ResumoXml'\" style=\"font-size: 20px; color: #2d5071\">Resumo DI Importada</span>\n            <span v-if=\"abaXml == 'aba-OutrasDespesasXml'\" style=\"font-size: 20px; color: #2d5071\">Outras Despesas</span>\n          </v-col>\n          <v-col align=\"end\" cols=\"2\">\n            <v-btn icon color=\"red\" @click=\"modalXml = false\">\n              <v-icon>mdi-close</v-icon>\n            </v-btn>\n          </v-col>\n        </v-row>\n      </v-card-title>\n      <v-card-text>\n        <AbaXml :dadosXml=\"dados\" class=\"mt-4\" />\n      </v-card-text>\n\n      <v-card-actions>\n        <v-row no-gutters>\n          <v-col align=\"start\">\n            <v-btn\n              v-if=\"abaXml !== 'aba-ResumoXml'\"\n              @click=\"etapaAnterior()\"\n              text\n              color=\"primary\"\n              elevation=\"0\"\n              dark\n            >\n              <v-icon left>mdi-arrow-left</v-icon> Anterior\n            </v-btn>\n          </v-col>\n          <v-col align=\"end\">\n            <v-btn\n              @click=\"proximaEtapa()\"\n              color=\"primary\"\n              elevation=\"0\"\n              dark\n              v-if=\"abaXml !== 'aba-OutrasDespesasXml'\"\n            >\n              Próximo \n              <v-icon right>mdi-arrow-right</v-icon>\n            </v-btn>\n            <v-btn\n              @click=\"criarConsultaXml()\"\n              color=\"primary\"\n              elevation=\"0\"\n              dark\n              v-if=\"abaXml == 'aba-OutrasDespesasXml'\"\n            >\n              Finalizar \n              <v-icon right>mdi-arrow-right</v-icon>\n            </v-btn>\n          </v-col>\n        </v-row>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n<script>\nimport AbaXml from \"../../AbaXml/AbaXml.vue\";\nimport Api from \"@/services/api.js\";\nimport Form from \"@/services/modules/form\";\n\nexport default {\n  name: \"ModalResumoXml\",\n  props: [\"visible\", \"dados\"],\n  components: {\n    AbaXml,\n  },\n  data() {\n    return {};\n  },\n  computed: {\n    modalXml: {\n      get() {\n        return this.visible;\n      },\n      set(value) {\n        if (!value) {\n          this.$emit(\"fechar\");\n        }\n      },\n    },\n    handleModalConsulta: {\n      get() {\n        return this.$store.state.modalConsulta.modalConsulta;\n      },\n      set(newValue) {\n        if (newValue != this.handleModalConsulta) {\n          this.$store.commit(\"modalConsulta/setModalConsulta\", newValue);\n        }\n      },\n    },\n    abaXml: {\n      get() {\n        return this.$store.state.abaXml.abaXml;\n      },\n      set(newValue) {\n        if (newValue != this.abaXml) {\n          this.$store.commit(\"abaXml/setAbaXml\", newValue);\n        }\n      },\n    },\n  },\n  watch: {\n    modalXml(val) {\n      if (val == true) {\n        this.alterarAba(\"aba-ResumoXml\");\n        this.handleModalConsulta = false;\n      }\n    },\n  },\n\n  methods: {\n    proximaEtapa() {\n      if (this.abaXml == \"aba-ResumoXml\") {\n        this.alterarAba(\"aba-OutrasDespesasXml\");\n      }\n    },\n    etapaAnterior() {\n      if (this.abaXml == \"aba-OutrasDespesasXml\") {\n        this.alterarAba(\"aba-ResumoXml\");\n      }\n    },\n    alterarAba(aba) {\n      this.abaXml = aba;\n    },\n    async criarConsultaXml() {\n      let api = new Api();\n      let response = await api.put(\"/declaracao/declaracaoXML\", {\n        afrmm: this.dados.afrmm,\n        capatazia: this.dados.capatazia,\n        blSomaCapataziaVMLD: this.dados.blSomaCapataziaVMLD,\n        id_declaracao: this.dados.id,\n        outras_despesas: this.dados.outras_despesas,\n      });\n\n      if (response.status == 200) {\n        let idDeclaracao = this.dados.id;\n\n        this.$store.commit('consulta/setCapatazia', this.dados.capatazia);\n        this.$store.commit('consulta/setAfrmm', this.dados.afrmm);\n        this.$store.commit('consulta/setBlSomaCapataziaVMLD', this.dados.blSomaCapataziaVMLD);\n\n        let declaracao = this.$root.$api\n          .get(\"/declaracao/listar/\" + idDeclaracao)\n          .then(async (response) => {\n            if (typeof response !== \"undefined\" && response.status == \"200\") {\n              let responseNew = response.data;\n              this.dados_xml = responseNew;\n\n              let form = new Form();\n              form.carregarInfoConsulta(responseNew);\n              form.carregarResultadoTelaSimples(responseNew);\n            } else {\n              console.error(\"Erro no carregamento das informações com a API.\");\n            }\n            return response;\n          });\n\n        Promise.all([declaracao])\n          .then(() => {\n            this.$emit(\"fechar\");\n\n            this.$store.commit(\n              \"modalNovaSimulacao/setModalNovaSimulacao\",\n              false\n            );\n\n            if (!this.dados.blEditarConsulta) {\n              setTimeout(() => {\n                this.loading = false;\n              }, 200);\n              this.$router.push({path: \"/consulta\"});\n            }\n          })\n          .catch(() => {\n            this.loading = false;\n          });\n        this.modalXml = false;\n      }\n    },\n  },\n};\n</script>\n"]}]}