{"remainingRequest":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/src/components/ArquivosDiversos/Modal/ModalUploadXML.vue?vue&type=style&index=0&id=7acce18a&scoped=true&lang=css&","dependencies":[{"path":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/src/components/ArquivosDiversos/Modal/ModalUploadXML.vue","mtime":1678361197239},{"path":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5kaXYtdXBsb2FkLXhtbCB7CiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGUgIWltcG9ydGFudDsKICBwYWRkaW5nOiAxNHB4OwogIGhlaWdodDogNDUwcHg7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQoKLnNwYW4tY3JpYXIgewogIGZvbnQ6IG5vcm1hbCBub3JtYWwgODAwIDIwcHgvMjdweCBNdWxpc2g7CiAgbGV0dGVyLXNwYWNpbmc6IDBweDsKICBjb2xvcjogIzJkNTA3MTsKfQoKLnNwYW4taW1wb3J0YXIgewogIGZvbnQ6IG5vcm1hbCBub3JtYWwgbm9ybWFsIDIwcHgvMjdweCBNdWxpc2g7CiAgbGV0dGVyLXNwYWNpbmc6IDBweDsKICBjb2xvcjogIzJkNTA3MTsKfQoKLnRleHRvLWVudmlvIHsKICBmb250OiBub3JtYWwgbm9ybWFsIG5vcm1hbCAxMnB4LzE2cHggTXVsaXNoOwogIGxldHRlci1zcGFjaW5nOiAwcHg7CiAgY29sb3I6ICMwMTBiMTQ7Cn0KCi5xdWFkcm8tYWxlcnRhLXJvbWFuZWlvIHsKICBiYWNrZ3JvdW5kOiAjZmZmY2YyIDAlIDAlIG5vLXJlcGVhdCBwYWRkaW5nLWJveDsKICBib3JkZXI6IDFweCBzb2xpZCAjMDAwMDAwMDA7CiAgZm9udDogbm9ybWFsIG5vcm1hbCBub3JtYWwgMTJweC8xNnB4IE11bGlzaDsKICBwYWRkaW5nOiAxNi41cHg7CiAgd2lkdGg6IDUyMHB4OwogIG1hcmdpbjogYXV0bzsKfQoKLmRpdi1hcnF1aXZvLXZhemlvIHsKICB3aWR0aDogNTIwcHg7CiAgaGVpZ2h0OiAyMDBweDsKICBtYXJnaW46IGF1dG87CiAgYm9yZGVyOiAycHggZGFzaGVkICNhY2I2YmY7CiAgYm9yZGVyLXJhZGl1czogOHB4Owp9CgouZGl2LWFycXVpdm8tc2VsZWNpb25hZG8gewogIHdpZHRoOiA1MjBweDsKICBtYXJnaW46IGF1dG87CiAgYm9yZGVyOiAycHggc29saWQgIzAwOThkYTsKICBib3JkZXItcmFkaXVzOiA4cHg7Cn0KCi5hcnJhc3Rhci1vdmVyIHsKICBiYWNrZ3JvdW5kOiAjZmZmOwogIGJvcmRlcjogMnB4IGRhc2hlZCBncmF5OwogIG9wYWNpdHk6IDAuMzsKfQoKLmlucHV0LWFycXVpdm8gewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBjdXJzb3I6IHBvaW50ZXI7CiAgdG9wOiAtMTYwcHg7CiAgaGVpZ2h0OiAyMDBweCAhaW1wb3J0YW50OwogIHdpZHRoOiAxMDAlOwogIG9wYWNpdHk6IDA7Cn0KCi5zcGFuLWFycXVpdm8tc2VsZWNpb25hZG8gewogIGNvbG9yOiAjMDA5OGRhOwogIGZvbnQ6IG5vcm1hbCBub3JtYWwgbm9ybWFsIDEycHgvMTZweCBNdWxpc2g7CiAgbGV0dGVyLXNwYWNpbmc6IDBweDsKfQoKLnNwYW4tbm9tZS1hcnF1aXZvIHsKICBmb250OiBub3JtYWwgbm9ybWFsIDgwMCAxNHB4LzI0cHggTXVsaXNoOwogIGxldHRlci1zcGFjaW5nOiAwcHg7CiAgY29sb3I6ICMyZDUwNzE7Cn0KCi5xdWFkcm8tYXZpc28tZW52aW8gewogIGJhY2tncm91bmQ6ICNmMmZkZmYgMCUgMCUgbm8tcmVwZWF0IHBhZGRpbmctYm94OwogIGJvcmRlcjogMXB4IHNvbGlkICMwMDAwMDAwMDsKICBmb250OiBub3JtYWwgbm9ybWFsIG5vcm1hbCAxMnB4LzE2cHggTXVsaXNoOwogIGxldHRlci1zcGFjaW5nOiAtMC41cHg7CiAgd2lkdGg6IDQ2MHB4OwogIG1hcmdpbjogYXV0bzsKfQoKLmRpdi1ib3Rhby10cm9jYXIgewogIHRleHQtYWxpZ246IHJpZ2h0Owp9CgouZGl2LWJvdGFvLWNyaWFyIHsKICB0ZXh0LWFsaWduOiByaWdodDsKfQo="},{"version":3,"sources":["ModalUploadXML.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+NA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"ModalUploadXML.vue","sourceRoot":"src/components/ArquivosDiversos/Modal","sourcesContent":["<template>\n  <v-dialog v-model=\"modalUpload\" width=\"650px\" persistent>\n    <div class=\"div-upload-xml\">\n      <v-row>\n        <v-col align=\"start\" cols=\"10\">\n          <span class=\"span-criar ml-2 mt-2\">Criar Consulta</span>\n          <span class=\"span-importar ml-2\">Importar DI</span>\n        </v-col>\n        <v-col align=\"end\" cols=\"2\">\n          <v-btn @click=\"fechar()\" icon color=\"red\">\n            <v-icon>mdi-close</v-icon>\n          </v-btn>\n        </v-col>\n      </v-row>\n\n      <p class=\"text-center texto-envio my-4\">Faça o envio do arquivo .xml para importar os dados da DI.</p>\n\n      <div class=\"quadro-alerta-romaneio\">\n        <v-icon color=\"#FFC400\">mdi-alert-outline</v-icon>\n        É necessário estar com o <strong>Romaneio de Carga</strong> em mãos para prosseguir.\n      </div>\n\n      <div\n        v-if=\"!arquivo\"\n        class=\"text-center div-arquivo-vazio my-4\"\n        :class=\"dragging ? 'arrastar-over' : ''\"\n      >\n        <v-icon color=\"#0098DA\" class=\"pt-10\" size=\"50\">mdi-cloud-upload-outline</v-icon>\n        <div class=\"pt-4\">\n          <p class=\"span-importar ma-0\">Enviar Arquivo</p>\n          <span class=\"texto-envio\">Arraste ou <a href=\"#\">clique aqui</a> para enviar a DI no formato XML.</span>\n        </div>\n        <input\n          class=\"input-arquivo\"\n          @dragenter=\"dragging = true\"\n          @dragleave=\"dragging = false\"\n          type=\"file\"\n          @change=\"onChange\"\n          @drag=\"onChange\"\n          accept=\".xml\"\n        />\n      </div>\n\n      <div v-else class=\"text-center div-arquivo-selecionado\">\n        <v-icon color=\"#0098DA\" class=\"pt-4\" size=\"50\">mdi-cloud-upload-outline</v-icon>\n        <p class=\"span-arquivo-selecionado ma-0\">Arquivo Selecionado</p>\n        <p class=\"span-nome-arquivo mt-2\">{{ arquivo.name }}</p>\n        <v-row class=\"quadro-aviso-envio mb-2\">\n          <v-col cols=\"1\" align=\"center\">\n            <v-icon small color=\"#17C3E6\">mdi-information-outline</v-icon>\n          </v-col>\n          <v-col cols=\"11\" align=\"start\">\n            O arquivo enviado <strong>não será armazenado</strong> em nossos servidores.<br />\n            A consulta será mantida por 120 dias.\n          </v-col>\n        </v-row>\n        <div class=\"div-botao-trocar mr-1 mb-1\">\n          <v-btn\n            text\n            class=\"text-none\"\n            elevation=\"0\"\n            color=\"primary\"\n            small\n            @click=\"arquivo = null\"\n            :disabled=\"loadingEnvio && !arquivoErro\"\n          >\n            Trocar Arquivo\n            <v-icon color=\"primary\" right small>mdi-cloud-upload-outline</v-icon>\n          </v-btn>\n        </div>\n      </div>\n\n      <div v-if=\"arquivo\" class=\"div-botao-criar mt-4 mr-2\">\n        <v-btn\n          color=\"primary\"\n          small\n          @click=\"enviarXML()\"\n          v-if=\"!arquivoErro\"\n          :loading=\"loadingEnvio\"\n        >\n          Criar Consulta <v-icon small right>mdi-arrow-right</v-icon>\n        </v-btn>\n        <v-btn disabled v-else text>Arquivo inválido!</v-btn>\n      </div>\n    </div>\n\n    <ModalResumoXML\n      v-if=\"dados_xml.bl_xml == 1\"\n      :visible=\"handleModalResumo\"\n      :dados=\"dados_xml\"\n      @fechar=\"fecharModalResumo()\"\n    />\n  </v-dialog>\n</template>\n<script>\nimport Form from \"@/services/modules/form\";\nimport ModalResumoXML from \"./ModalResumoXML.vue\";\n\nexport default {\n  components: { ModalResumoXML },\n\n  name: \"ModalUploadXML\",\n\n  props: [\"visible\"],\n\n  data() {\n    return {\n      handleModalResumo: false,\n      dados_xml: \"\",\n      dragging: false,\n      arquivo: null,\n      arquivoErro: false,\n      loadingEnvio: false,\n    };\n  },\n\n  computed: {\n    modalUpload: {\n      get() {\n        return this.visible;\n      },\n      set(value) {\n        if (!value) {\n          this.$emit(\"close\");\n          this.arquivo = null;\n          this.arquivoErro = false;\n        }\n      },\n    },\n\n    loading: {\n      get() {\n        return this.$store.state.loading.loading;\n      },\n      set(newValue) {\n        if (newValue != this.loading) {\n          this.$store.commit(\"loading/setLoading\", newValue);\n        }\n      },\n    },\n  },\n\n  watch: {\n    arquivo(val) {\n      if (!val) {\n        this.arquivoErro = false;\n        this.loadingEnvio = false;\n      }\n    },\n  },\n\n  methods: {\n    fechar() {\n      this.modalUpload = false\n      this.$store.commit(\"modalNovaSimulacao/setModalNovaSimulacao\", false);\n    },\n\n    fecharModalResumo() {\n      this.$store.commit(\"modalNovaSimulacao/setModalNovaSimulacao\", false);\n      this.handleModalResumo = false;\n    },\n\n    async enviarXML() {\n      if (!this.arquivo) {\n        return;\n      }\n\n      this.loadingEnvio = true;\n\n      let formData = new FormData();\n      formData.append(\"arquivo\", this.arquivo);\n\n      let response = await this.$root.$api.postFileXML(\"/declaracao/importarXML\", formData);\n\n      if (response.status == 200) {\n        let idDeclaracao = response.data;\n\n        let declaracao = await this.$root.$api.get(\"/declaracao/listar/\" + idDeclaracao);\n        let adicoes = this.$store.dispatch(\"adicoes/carregarAdicoes\", idDeclaracao);\n\n        Promise.all([declaracao, adicoes]).then(() => {\n          this.arquivo = null;\n          this.dados_xml = declaracao.data;\n\n          let form = new Form();\n          form.carregarInfoConsulta(declaracao.data);\n          form.carregarResultadoTelaSimples(declaracao.data);\n\n          this.handleModalResumo = true;\n          this.modalUpload = false;\n          this.loadingEnvio = false;\n        }).catch(() => {\n          this.loadingEnvio = false;\n          this.handleModalResumo = false;\n        });\n      } else {\n        this.arquivoErro = true;\n        this.handleModalResumo = false;\n      }\n    },\n\n    onChange(e) {\n      var files = e.target.files || e.dataTransfer.files;\n\n      if (!files.length) {\n        this.dragging = false;\n        return;\n      }\n\n      let file = files[0];\n\n      if (!file.type.match(\"text/xml\")) {\n        this.dragging = false;\n        return;\n      }\n\n      this.arquivo = file;\n      this.dragging = false;\n    },\n  },\n};\n</script>\n<style scoped>\n.div-upload-xml {\n  background-color: white !important;\n  padding: 14px;\n  height: 450px;\n  overflow: hidden;\n}\n\n.span-criar {\n  font: normal normal 800 20px/27px Mulish;\n  letter-spacing: 0px;\n  color: #2d5071;\n}\n\n.span-importar {\n  font: normal normal normal 20px/27px Mulish;\n  letter-spacing: 0px;\n  color: #2d5071;\n}\n\n.texto-envio {\n  font: normal normal normal 12px/16px Mulish;\n  letter-spacing: 0px;\n  color: #010b14;\n}\n\n.quadro-alerta-romaneio {\n  background: #fffcf2 0% 0% no-repeat padding-box;\n  border: 1px solid #00000000;\n  font: normal normal normal 12px/16px Mulish;\n  padding: 16.5px;\n  width: 520px;\n  margin: auto;\n}\n\n.div-arquivo-vazio {\n  width: 520px;\n  height: 200px;\n  margin: auto;\n  border: 2px dashed #acb6bf;\n  border-radius: 8px;\n}\n\n.div-arquivo-selecionado {\n  width: 520px;\n  margin: auto;\n  border: 2px solid #0098da;\n  border-radius: 8px;\n}\n\n.arrastar-over {\n  background: #fff;\n  border: 2px dashed gray;\n  opacity: 0.3;\n}\n\n.input-arquivo {\n  position: relative;\n  cursor: pointer;\n  top: -160px;\n  height: 200px !important;\n  width: 100%;\n  opacity: 0;\n}\n\n.span-arquivo-selecionado {\n  color: #0098da;\n  font: normal normal normal 12px/16px Mulish;\n  letter-spacing: 0px;\n}\n\n.span-nome-arquivo {\n  font: normal normal 800 14px/24px Mulish;\n  letter-spacing: 0px;\n  color: #2d5071;\n}\n\n.quadro-aviso-envio {\n  background: #f2fdff 0% 0% no-repeat padding-box;\n  border: 1px solid #00000000;\n  font: normal normal normal 12px/16px Mulish;\n  letter-spacing: -0.5px;\n  width: 460px;\n  margin: auto;\n}\n\n.div-botao-trocar {\n  text-align: right;\n}\n\n.div-botao-criar {\n  text-align: right;\n}\n</style>"]}]}