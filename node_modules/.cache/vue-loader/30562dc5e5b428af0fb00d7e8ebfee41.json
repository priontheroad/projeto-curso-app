{"remainingRequest":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/src/components/Cabecalho/Cabecalho.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/src/components/Cabecalho/Cabecalho.vue","mtime":1678361197239},{"path":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/priscila_floriano/Documentos/diversos/rateio-importacao-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jb25maWctZmFpeGEtYWJhIHsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2I3YzJjYyAhaW1wb3J0YW50OwogIGhlaWdodDogNjBweCAhaW1wb3J0YW50OwogIC8vIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwp9CgpAc3VwcG9ydHMgKCgtd2Via2l0LWJhY2tkcm9wLWZpbHRlcjogbm9uZSkgb3IgKGJhY2tkcm9wLWZpbHRlcjogbm9uZSkpIHsKICAuY29uZmlnLWZhaXhhLWFiYSB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNCkgIWltcG9ydGFudDsKICAgIC13ZWJraXQtYmFja2Ryb3AtZmlsdGVyOiBibHVyKDEwcHgpICFpbXBvcnRhbnQ7CiAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTBweCkgIWltcG9ydGFudDsKICB9Cn0KCi50aXR1bG8tY2xpZW50ZSB7CiAgY29sb3I6ICMyZDUwNzE7CiAgZm9udC13ZWlnaHQ6IG5vcm1hbDsKICBmb250LXNpemU6IDE4cHg7Cn0KLmJ0bi1lZGl0YXIgewogIGNvbG9yOiAjMmQ1MDcxICFpbXBvcnRhbnQ7Cn0KCi5jdXN0b20tbG9hZGVyIHsKICBhbmltYXRpb246IGxvYWRlciAxcyBpbmZpbml0ZTsKICBkaXNwbGF5OiBmbGV4Owp9CkAtbW96LWtleWZyYW1lcyBsb2FkZXIgewogIGZyb20gewogICAgdHJhbnNmb3JtOiByb3RhdGUoMCk7CiAgfQogIHRvIHsKICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7CiAgfQp9CkAtd2Via2l0LWtleWZyYW1lcyBsb2FkZXIgewogIGZyb20gewogICAgdHJhbnNmb3JtOiByb3RhdGUoMCk7CiAgfQogIHRvIHsKICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7CiAgfQp9CkAtby1rZXlmcmFtZXMgbG9hZGVyIHsKICBmcm9tIHsKICAgIHRyYW5zZm9ybTogcm90YXRlKDApOwogIH0KICB0byB7CiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOwogIH0KfQpAa2V5ZnJhbWVzIGxvYWRlciB7CiAgZnJvbSB7CiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwKTsKICB9CiAgdG8gewogICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsKICB9Cn0K"},{"version":3,"sources":["Cabecalho.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+lBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cabecalho.vue","sourceRoot":"src/components/Cabecalho","sourcesContent":["<template>\n  <div class=\"tab\">\n    <div class=\"d-flex justify-space-between align-center px-4 config-faixa-aba\">\n      <div>\n        <span class=\"standard-title\" style=\"color: #2d5071\">Rateio {{ tipo }} {{ consulta.numero_declaracao }}</span>\n        <v-chip v-if=\"consulta.bl_xml == 1\" small color=\"#EBF5FA\" class=\"rounded-0 mb-2 mx-2\">\n          <span style=\"color: #007cb3\">Importado do XML</span>\n        </v-chip>\n        <span class=\"titulo-cliente ml-4\">{{ consulta.descricao | truncate(65, \"...\") }}</span>\n      </div>\n\n      <div class=\"d-inline-flex\">\n        <v-btn\n          @click=\"$router.currentRoute.path !== '/consulta/resultado' ? editarConsulta() : voltarConsulta()\"\n          text\n          small\n          class=\"elevation-0 btn-editar mr-2 ml-2 text-capitalize\"\n        >\n          Editar\n          <v-icon small right>mdi-pencil-outline</v-icon>\n        </v-btn>\n\n        <v-btn\n          v-if=\"\n            this.$router.currentRoute.path == '/consulta' \n            && this.consulta.bl_xml == 0\n            && this.consulta.mercadoria.quantidade_total_adicoes  != this.adicoes.length\n          \"\n          color=\"primary\"\n          text\n          small\n          @click.stop=\"abrirModalAdicoes\"\n          class=\"mr-2\"\n        >\n          Incluir Adição\n          <v-icon right color=\"primary\">mdi-plus-circle-outline</v-icon>\n        </v-btn>\n\n        <v-btn\n          :loading=\"loadingFinalizar\"\n          v-if=\"this.$router.currentRoute.path == '/consulta'\"\n          color=\"primary\"\n          small\n          class=\"text-capitalize elevation-0 justify-space-between\"\n          @click=\"validarVmcvFinalizar(); loader = 'loadingFinalizar'\"\n        >\n          Finalizar\n          <v-icon small right>mdi-check</v-icon>\n        </v-btn>\n      </div>\n    </div>\n    \n    <SnackBar\n      v-if=\"!consulta.mercadoria.quantidade_total_adicoes\"\n      :texto=\"'Para finalizar a consulta, as adições preenchidas devem ser igual a:' + consulta.mercadoria.quantidade_total_adicoes\"\n      :tipo=\"tipoAlerta\"\n      :color=\"'error'\"\n      @fecharAlerta=\"dialogErroFinalizacao = false\"\n    />\n\n    <SnackBarConfirmar\n      :snackbar=\"snackFinalizar\"\n      :message=\"'Valor do VMCV não confere com o Incoterm informado. Continuar mesmo assim?'\"\n      @cancelar_snackbar=\"snackFinalizar = false\"\n      @confirmar_snackbar=\"finalizar\"\n      :labelConfirmar=\"'Continuar'\"\n      :iconeConfirmar=\"'mdi-check'\"\n    />\n\n    <ModalResumoXML\n      v-if=\"consulta.bl_xml == 1\"\n      :visible=\"handleModalResumo\"\n      :dados=\"dadosXml\"\n      @fechar=\"handleModalResumo = false\"\n    />\n  </div>\n</template>\n\n<script>\nimport Form from \"@/services/modules/form\";\nimport { mapGetters } from \"vuex\";\nimport SnackBar from \"../SnackBar/SnackBar.vue\";\nimport SnackBarConfirmar from \"../SnackBar/SnackBarDelete.vue\";\nimport ModalResumoXML from \"@/components/ArquivosDiversos/Modal/ModalResumoXML.vue\";\nimport { LogsServiceAPI } from \"@/services/modules/logs_service.js\";\n\nexport default {\n  components: {\n    SnackBar,\n    SnackBarConfirmar,\n    ModalResumoXML\n  },\n  name: \"Cabecalho\",\n  data() {\n    return {\n      dialogDelete: false,\n      excluirTodos: false,\n      dialogErroFinalizacao: false,\n      loadingEditar: false,\n      loadingFinalizar: false,\n      loader: null,\n      pesoAdicoes: 0,\n      tipo: \"\",\n      handleModalResumo: false,\n      snackFinalizar: false,\n    };\n  },\n  computed: {\n    ...mapGetters(\"adicoes\", {\n      adicoes: \"getDados\",\n    }),\n    ...mapGetters(\"consulta\", {\n      consulta: \"getState\",\n    }),\n    ...mapGetters(\"resultadosFinal\", {\n      resultado: \"getState\",\n    }),\n    exibe_alerta() {\n      return this.$store.state.alertas.exibe;\n    },\n\n    tipoAlerta() {\n      return this.$store.state.alertas.tipo;\n    },\n\n    textoAlerta() {\n      return this.$store.state.alertas.texto;\n    },\n    handleModalAdicao: {\n      get() {\n        return this.$store.state.modalAdicoes.modalAdicoes;\n      },\n      set(newValue) {\n        if (newValue != this.handleModalAdicao) {\n          this.$store.commit(\"modalAdicoes/setModalAdicoes\", newValue);\n        }\n      },\n    },\n    handleModalConsulta: {\n      get() {\n        return this.$store.state.modalConsulta.modalConsulta;\n      },\n      set(newValue) {\n        if (newValue != this.handleModalConsulta) {\n          this.$store.commit(\"modalConsulta/setModalConsulta\", newValue);\n        }\n      },\n    },\n    editandoModalConsulta: {\n      get() {\n        return this.$store.state.modalConsulta.editando;\n      },\n      set(newValue) {\n        if (newValue != this.editandoModalConsulta) {\n          this.$store.commit(\"modalConsulta/setEditando\", newValue);\n        }\n      },\n    },\n    loading: {\n      get() {\n        return this.$store.state.loading.loading;\n      },\n      set(newValue) {\n        if (newValue != this.loading) {\n          this.$store.commit(\"loading/setLoading\", newValue);\n        }\n      },\n    },\n    pagination: {\n      get() {\n        return this.$store.state.resultadosFinal.pagination;\n      },\n      set(newValue) {\n        if (newValue != this.pagination) {\n          this.$store.commit(\"resultadosFinal/setPagination\", newValue);\n        }\n      },\n    },\n    abaAtual: {\n      get() {\n        return this.$store.state.abaResultado.abaResultado;\n      },\n      set(newValue) {\n        if (newValue != this.abaAtual) {\n          this.$store.commit(\"abaResultado/setAbaResultado\", newValue);\n        }\n      },\n    },\n    dadosXml() {\n      return {\n        id: this.consulta.id,\n        numero_declaracao: this.consulta.numero_declaracao,\n        data: this.consulta.data,\n        tipo_operacao: {\n          id: this.consulta.tipo_operacao,\n          descricao: this.consulta.tipo_operacao_descricao\n        },\n        mercadoria: {\n          quantidade_total_adicoes: this.consulta.mercadoria.quantidade_total_adicoes\n        },\n        valor_mercadoria: {\n          moeda: this.consulta.valor_mercadoria.moeda,\n          valor: this.consulta.valor_mercadoria.valor\n        },\n        frete_internacional: {\n          moeda: this.consulta.frete_internacional.moeda,\n          valor: this.consulta.frete_internacional.valor\n        },\n        seguro_internacional: {\n          moeda: this.consulta.seguro_internacional.moeda,\n          valor: this.consulta.seguro_internacional.valor\n        },\n        estado: this.consulta.estado,\n        afrmm: this.consulta.afrmm,\n        blSomaCapataziaVMLD: this.consulta.blSomaCapataziaVMLD,\n        capatazia: this.consulta.capatazia,\n        blEditarConsulta: true,\n        outras_despesas: this.consulta.outras_despesas,\n      }\n    },\n  },\n  filters: {\n    truncate: function (text, length, suffix) {\n      if (\n        typeof text !== \"undefined\" &&\n        text !== null &&\n        text !== \"\" &&\n        text.length > length\n      ) {\n        return text.substring(0, length) + suffix;\n      } else {\n        return text;\n      }\n    },\n  },\n  watch: {\n    loader() {\n      const l = this.loader;\n      this[l] = !this[l];\n\n      setTimeout(() => (this[l] = false), 6000);\n\n      this.loader = null;\n    },\n  },\n  created() {\n    this.identificaDiDuimp();\n  },\n\n  methods: {\n    guardarLog(){\n      let logsServiceApi = new LogsServiceAPI();\n      logsServiceApi.salvarLog(this.$cookies, 346, 2);\n    },\n    identificaDiDuimp() {\n      let numero_declaracao = this.consulta.numero_declaracao;\n      var str = numero_declaracao;\n      var regexp = new RegExp(/[a-zA-Z]+[0-9]*/i);\n      var n = regexp.exec(str);\n      if (!n) {\n        this.tipo = \"DI\";\n      } else {\n        this.tipo = \"DUIMP\";\n      }\n    },\n\n    abrirModalAdicoes() {\n      let qtdAdicoes = this.consulta.mercadoria.quantidade_total_adicoes;\n      if (\n        typeof qtdAdicoes !== \"undefined\" &&\n        qtdAdicoes !== null &&\n        qtdAdicoes !== \"\" &&\n        parseInt(qtdAdicoes) <= parseInt(this.adicoes.length)\n      ) {\n        //mostrar erro na tela\n        Object.bus.$emit(\"structure\", {\n          message:\n            \"Não pode ser adicionado mais adições, quantidade máxima. igual a \" +\n            parseInt(qtdAdicoes),\n          type: \"error\",\n          timeout: 2000,\n        });\n\n        return false;\n      }\n\n      //limpar informacoes preenchidas anteriormente\n      let form = new Form();\n      form.carregarNovaAdicao();\n\n      this.handleModalAdicao = true;\n    },\n\n    pegandoPesoAdicoes() {\n      let pesoAdicoes = 0;\n      if (\n        typeof this.adicoes !== \"undefined\" &&\n        this.adicoes !== null &&\n        this.adicoes !== \"\" &&\n        this.adicoes.length > 0\n      ) {\n        this.adicoes.forEach((element) => {\n          if (\n            typeof element.peso_liquido_total !== \"undefined\" &&\n            element.peso_liquido_total !== null &&\n            element.peso_liquido_total !== \"\"\n          ) {\n            pesoAdicoes = pesoAdicoes + parseFloat(element.peso_liquido_total);\n          }\n        });\n      }\n      return pesoAdicoes;\n    },\n\n    validarVmcvFinalizar() {\n      let vlrVmcvItens = 0;\n      let blSomaFrete  = false;\n      let blSomaSeguro = false;\n      \n      //valida o peso dos itens das adições\n      this.adicoes.forEach((i) => {\n        switch (i.id_incoterm) {\n          case 1: // CFR\n          case 2: // CPT\n            blSomaFrete = true;\n          break;\n\n          case 3: // CIF\n          case 4: // CIP\n          case 6: // DDP\n            blSomaFrete = true;\n            blSomaSeguro = true;\n          break;\n\n          case 5: // DAP\n          case 7: // DPU\n            if (i.seguro_vmcv) {\n              blSomaSeguro = true;\n            }\n            blSomaFrete = true;\n          break;\n        }\n\n        let mostraItem = i.item;\n        \n        mostraItem.forEach((itm) => {\n          vlrVmcvItens += parseFloat(itm.vmcv)\n        });\n      });\n      \n      let vlrConsulta = parseFloat(this.consulta.valor_mercadoria.valor);\n      if (blSomaFrete) {\n        vlrConsulta += parseFloat(this.consulta.frete_internacional.valor);\n      }\n      if (blSomaSeguro) {\n        vlrConsulta += parseFloat(this.consulta.seguro_internacional.valor);\n      }\n\n      if (vlrVmcvItens > vlrConsulta) {\n        this.snackFinalizar = true;\n        return false;\n      }\n\n      this.finalizar();\n    },\n\n    async finalizar() {\n      if (typeof this.adicoes[0] == \"undefined\") {\n        Object.bus.$emit(\"structure\", {\n          type: \"error\",\n          message: \"Não possui adições preenchidas.\",\n          timeout: 10000,\n        });\n        return false;\n      }\n\n      //Validação valor Antidumping\n      let antidumpingValido = true;\n\n      this.adicoes.forEach((adicao) => {\n        let antidumpingAdicao = +adicao.antidumping;\n        let totalAntidumpingItem = 0;\n\n        adicao.item.forEach((item) => {\n          totalAntidumpingItem += +item.antidumping;\n        });\n\n        if (antidumpingAdicao != totalAntidumpingItem) {\n          antidumpingValido = false;\n        }\n      });\n\n      if (!antidumpingValido) {\n        Object.bus.$emit(\"structure\", {\n          type: \"error\",\n          message:\n            \"O Antidumping dos item(s) não confere com valor informado na Adição.\",\n          timeout: 20000,\n        });\n\n        return false;\n      }\n\n      //Validação qtd de adições com qtd consulta\n      let totalAdicoes = this.consulta.mercadoria.quantidade_total_adicoes;\n\n      if (totalAdicoes != this.adicoes.length) {\n        Object.bus.$emit(\"structure\", {\n          type: \"error\",\n          message:\n            \"Para finalizar a consulta, as adições preenchidas devem ser igual a \" +\n            totalAdicoes,\n          timeout: 10000,\n        });\n        return false;\n      }\n\n      // let pesoAdicoes = parseFloat(this.pegandoPesoAdicoes()).toFixed(4);\n      //Validação peso das adições com peso da consulta\n      let pesosItens = 0;\n      //valida o peso dos itens das adições\n      this.adicoes.forEach((i) => {\n        let mostraItem = i.item;\n        mostraItem.forEach((itm) => {\n          pesosItens =\n            pesosItens +\n            parseFloat(itm.peso_unitario) * parseFloat(itm.quantidade);\n        });\n      });\n      let pesoConsulta = parseFloat(\n        this.consulta.mercadoria.peso_liquido_total\n      ).toFixed(5);\n      if (pesoConsulta != pesosItens.toFixed(5)) {\n        Object.bus.$emit(\"structure\", {\n          type: \"error\",\n          message:\n            \"Você preencheu \" +\n            pesosItens +\n            \" Kg. \" +\n            \"Para finalizar a consulta, a soma do peso dos itens das adições preenchidas devem ser iguais a \" +\n            parseFloat(pesoConsulta) +\n            \" Kg. \",\n          timeout: 10000,\n        });\n\n        return false;\n      }\n\n      //validacao para pegar id da adicao\n      if (\n        typeof this.adicoes[0].id == \"undefined\" ||\n        this.adicoes[0].id == null ||\n        this.adicoes[0].id == \"\"\n      ) {\n        return false;\n      }\n\n      //validar cide\n      //encontrar a primeira adicao errada\n      let adicaoSelected = this.adicoes.find((element) => {\n        let valorTotalCideAdicao = element.tributacoes.cide_combustiveis.valor;\n        if (\n          valorTotalCideAdicao !== null &&\n          valorTotalCideAdicao !== \"\" &&\n          valorTotalCideAdicao > 0\n        ) {\n          let itens = element.item;\n          if (itens !== null && itens !== \"\" && itens.length > 0) {\n            let valorTotalCideItens = 0;\n            itens.forEach((item) => {\n              valorTotalCideItens =\n                valorTotalCideItens + parseFloat(item.cide_combustiveis);\n            });\n            //pegando primeira adicao com erro\n            if (\n              parseFloat(valorTotalCideAdicao).toFixed(2) !==\n              parseFloat(valorTotalCideItens).toFixed(2)\n            ) {\n              return element;\n            }\n          }\n        }\n      });\n\n      if (\n        typeof adicaoSelected !== \"undefined\" &&\n        adicaoSelected !== null &&\n        adicaoSelected !== \"\"\n      ) {\n        Object.bus.$emit(\"structure\", {\n          type: \"error\",\n          message:\n            \"Adicao #\" +\n            adicaoSelected.id_gerado +\n            \": soma do cide nos itens, não corresponde ao preenchido na adição.\",\n          timeout: 1000,\n        });\n        return false;\n      }\n\n      if (\n        this.adicoes.length == this.consulta.mercadoria.quantidade_total_adicoes\n      ) {\n        //setar abaResultado na hora de abrir resultado\n        this.abaAtual = \"aba-DadosGeraisResultado\";\n\n        this.loading = true;\n        let id_declaracao = this.consulta.id;\n\n        let informacoes = await this.$root.$api.get(\n          \"/resultado/informacoes/\" + id_declaracao\n        );\n\n        let dadosGerais = await this.$root.$api.get(\n          \"/resultado/dados_gerais/\" + id_declaracao\n        );\n\n        Promise.all([informacoes, dadosGerais])\n          .then((response) => {\n            informacoes = response[0];\n            dadosGerais = response[1];\n\n            //colocando informacoes no resultado final\n            this.resultado.id = informacoes.data.id;\n            this.resultado.descricao = informacoes.data.descricao;\n            this.resultado.data = informacoes.data.data;\n            this.resultado.numero_declaracao =\n              informacoes.data.numero_declaracao;\n            this.resultado.estado = informacoes.data.estado;\n            this.resultado.cotacoes = informacoes.data.cotacoes;\n            this.resultado.tipo_operacao = informacoes.data.tipo_operacao;\n            this.resultado.valor_mercadoria = informacoes.data.valor_mercadoria;\n            this.resultado.seguro_internacional =\n              informacoes.data.seguro_internacional;\n            this.resultado.frete_internacional =\n              informacoes.data.frete_internacional;\n            this.resultado.capatazia = informacoes.data.capatazia;\n            this.resultado.afrmm = informacoes.data.afrmm;\n            this.resultado.outras_despesas = informacoes.data.outras_despesas;\n            this.resultado.mercadoria = informacoes.data.mercadoria;\n            this.resultado.adicoes = informacoes.data.adicoes;\n            this.resultado.qtd_adicoes = informacoes.data.qtd_adicoes;\n            this.resultado.qtd_notas_fiscais =\n              informacoes.data.qtd_notas_fiscais;\n            this.resultado.paginationAdicao = {\n              current: 1,\n              totalPage: informacoes.data.adicoes.length,\n              totalRegister: informacoes.data.adicoes.length,\n            };\n\n            this.resultado.dados_gerais = dadosGerais.data;\n\n            //setando carregamento das adicoes\n            this.resultado.carregamentoAdicoes = false;\n            //setando carregamento das notas fiscais\n            this.resultado.carregamentoNotasFiscais = false;\n\n            this.guardarLog();\n\n            setTimeout(() => {\n              this.loading = false;\n              this.$router.push(\"/consulta/resultado\");\n            }, 200);\n          })\n          .catch(() => {\n            this.loading = false;\n          });\n      } else {\n        this.dialogErroFinalizacao = true;\n      }\n    },\n    closeDelete() {\n      this.dialogDelete = false;\n      this.$nextTick(() => {\n        //atuliza o DOM\n        this.editedItem = Object.assign({}, this.consulta); //Object.assign: clona o objeto\n        this.editedIndex = -1;\n      });\n    },\n    deleteItem(id) {\n      this.$store.dispatch(\"historico/excluirHistorico\", id).then(() => {\n        this.$router.push({\n          path: \"/\",\n        });\n        this.closeDelete();\n      });\n    },\n    showDeleteDialog() {\n      this.excluirTodos = false;\n      this.itemToDelete = 1;\n      this.dialogDelete = !this.dialogDelete;\n    },\n    editarConsulta() {\n      if (this.consulta.bl_xml) {\n        this.handleModalResumo = true;\n        return;\n      }\n      this.handleModalConsulta = true;\n      this.editandoModalConsulta = true;\n    },\n    voltarConsulta() {\n      this.$router.push({ path: \"/consulta\" });\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n.config-faixa-aba {\n  border-bottom: 1px solid #b7c2cc !important;\n  height: 60px !important;\n  // background-color: white;\n}\n\n@supports ((-webkit-backdrop-filter: none) or (backdrop-filter: none)) {\n  .config-faixa-aba {\n    background-color: rgba(255, 255, 255, 0.4) !important;\n    -webkit-backdrop-filter: blur(10px) !important;\n    backdrop-filter: blur(10px) !important;\n  }\n}\n\n.titulo-cliente {\n  color: #2d5071;\n  font-weight: normal;\n  font-size: 18px;\n}\n.btn-editar {\n  color: #2d5071 !important;\n}\n\n.custom-loader {\n  animation: loader 1s infinite;\n  display: flex;\n}\n@-moz-keyframes loader {\n  from {\n    transform: rotate(0);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n@-webkit-keyframes loader {\n  from {\n    transform: rotate(0);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n@-o-keyframes loader {\n  from {\n    transform: rotate(0);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n@keyframes loader {\n  from {\n    transform: rotate(0);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n</style>"]}]}